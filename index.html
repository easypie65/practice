<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï§ë3 ÏÇºÍ∞ÅÎπÑ Ï¥ùÎ≥µÏäµ - ÎßûÏ∂§Ìòï Î¨∏Ï†úÏùÄÌñâ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .progress-section {
            padding: 20px 30px;
            background: #f8f9ff;
            border-bottom: 1px solid #e0e6ff;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e6ff;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .stat {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-width: 120px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 300px;
            background: #f8f9ff;
            padding: 30px;
            border-right: 1px solid #e0e6ff;
        }

        .topic-list {
            list-style: none;
        }

        .topic-item {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .topic-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .topic-item.active {
            border-color: #4facfe;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .topic-item.completed::after {
            content: '‚úì';
            position: absolute;
            right: 15px;
            top: 15px;
            color: #4caf50;
            font-weight: bold;
            font-size: 1.2em;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .problem-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            margin-bottom: 30px;
            display: none;
        }

        .problem-card.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .problem-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .problem-image {
            text-align: center;
            margin: 20px 0;
        }

        .problem-text {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #555;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e6ff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1.1em;
        }

        .option:hover {
            border-color: #4facfe;
            background: #f8f9ff;
        }

        .option.selected {
            border-color: #4facfe;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .option.correct {
            border-color: #4caf50;
            background: #e8f5e8;
            color: #2e7d32;
        }

        .option.wrong {
            border-color: #f44336;
            background: #ffebee;
            color: #c62828;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-secondary {
            background: #f0f2f5;
            color: #666;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
        }

        .feedback.correct {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            color: #2e7d32;
        }

        .feedback.wrong {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
        }

        .explanation {
            margin-top: 15px;
            font-size: 1em;
            line-height: 1.5;
            white-space: pre-line;
        }

        .reference-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .reference-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            text-align: center;
        }

        .formulas {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }

        .formula {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .welcome-screen {
            text-align: center;
        }

        .welcome-title {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 20px;
        }

        .welcome-text {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .start-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(79, 172, 254, 0.4);
        }

        .topic-complete {
            text-align: center;
            padding: 40px;
        }

        .complete-title {
            font-size: 2.2em;
            color: #4caf50;
            margin-bottom: 20px;
        }

        .complete-message {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî∫ ÏÇºÍ∞ÅÎπÑ ÎßàÏä§ÌÑ∞</h1>
            <p>Ï§ëÌïôÍµê 3ÌïôÎÖÑ ÏÇºÍ∞ÅÎπÑ Ï¥ù Î≥µÏäµ - ÎßûÏ∂§Ìòï Î¨∏Ï†úÏùÄÌñâ</p>
        </div>

        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="totalSolved">0</div>
                    <div>Ìï¥Í≤∞Ìïú Î¨∏Ï†ú</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="correctRate">0%</div>
                    <div>Ï†ïÎãµÎ•†</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="currentStreak">0</div>
                    <div>Ïó∞ÏÜç Ï†ïÎãµ</div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="reference-card">
                    <div class="reference-title">üìê ÏÇºÍ∞ÅÎπÑ Í≥µÏãù</div>
                    <div class="formulas">
                        <div class="formula">sin Œ∏ = ÎåÄÎ≥Ä/ÎπóÎ≥Ä</div>
                        <div class="formula">cos Œ∏ = Ïù∏Î≥Ä/ÎπóÎ≥Ä</div>
                        <div class="formula">tan Œ∏ = ÎåÄÎ≥Ä/Ïù∏Î≥Ä</div>
                    </div>
                </div>
                
                <ul class="topic-list">
                    <li class="topic-item" data-topic="basic" onclick="selectTopic('basic')">
                        <strong>Í∏∞Î≥∏ Í∞úÎÖê</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">ÏÇºÍ∞ÅÎπÑÏùò Ï†ïÏùòÏôÄ Í∏∞Î≥∏ Í∞úÎÖê</div>
                    </li>
                    <li class="topic-item" data-topic="calculation" onclick="selectTopic('calculation')">
                        <strong>ÏÇºÍ∞ÅÎπÑ Í≥ÑÏÇ∞</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥ÏúºÎ°ú ÏÇºÍ∞ÅÎπÑ Íµ¨ÌïòÍ∏∞</div>
                    </li>
                    <li class="topic-item" data-topic="special" onclick="selectTopic('special')">
                        <strong>ÌäπÏàòÍ∞Å</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">30¬∞, 45¬∞, 60¬∞ ÏÇºÍ∞ÅÎπÑ</div>
                    </li>
                    <li class="topic-item" data-topic="application" onclick="selectTopic('application')">
                        <strong>ÌôúÏö© Î¨∏Ï†ú</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">Ïã§ÏÉùÌôú Î¨∏Ï†ú Ìï¥Í≤∞ÌïòÍ∏∞</div>
                    </li>
                    <li class="topic-item" data-topic="mixed" onclick="selectTopic('mixed')">
                        <strong>Ï¢ÖÌï© Î¨∏Ï†ú</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">Î™®Îì† ÎÇ¥Ïö©ÏùÑ Ï¢ÖÌï©Ìïú Î¨∏Ï†ú</div>
                    </li>
                </ul>
            </div>

            <div class="content-area">
                <div id="welcomeScreen" class="welcome-screen">
                    <h2 class="welcome-title">ÏÇºÍ∞ÅÎπÑ Ï¥ùÎ≥µÏäµÏùÑ ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî! üöÄ</h2>
                    <p class="welcome-text">
                        ÏôºÏ™ΩÏóêÏÑú ÌïôÏäµÌïòÍ≥† Ïã∂ÏùÄ Ï£ºÏ†úÎ•º ÏÑ†ÌÉùÌïòÎ©¥<br>
                        ÎßûÏ∂§Ìòï Î¨∏Ï†úÎì§Ïù¥ Ï∞®Î°ÄÎåÄÎ°ú ÎÇòÌÉÄÎÇ©ÎãàÎã§.<br>
                        Í∞Å Î¨∏Ï†úÎßàÎã§ ÏûêÏÑ∏Ìïú Ìï¥ÏÑ§Í≥º Ìï®Íªò Ïã§Î†•ÏùÑ ÌÇ§ÏõåÎ≥¥ÏÑ∏Ïöî!
                    </p>
                    <button class="start-btn" onclick="selectTopic('basic')">Í∏∞Î≥∏ Í∞úÎÖêÎ∂ÄÌÑ∞ ÏãúÏûëÌïòÍ∏∞</button>
                </div>

                <div id="problemCard" class="problem-card">
                    <h3 class="problem-title" id="problemTitle">Î¨∏Ï†ú</h3>
                    <div class="problem-image" id="problemImage"></div>
                    <div class="problem-text" id="problemText">Î¨∏Ï†ú ÎÇ¥Ïö©Ïù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.</div>
                    <div class="options" id="optionsContainer"></div>
                    <div class="buttons">
                        <button class="btn btn-secondary" id="hintBtn" onclick="showHint()">üí° ÌûåÌä∏</button>
                        <button class="btn btn-primary" id="checkBtn" onclick="checkAnswer()" disabled>Ï†ïÎãµ ÌôïÏù∏</button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextProblem()" style="display: none;">Îã§Ïùå Î¨∏Ï†ú</button>
                    </div>
                    <div class="feedback" id="feedback">
                        <div id="feedbackText"></div>
                        <div class="explanation" id="explanation"></div>
                    </div>
                </div>

                <div id="topicComplete" class="topic-complete" style="display: none;">
                    <h2 class="complete-title">üéâ Ï£ºÏ†ú ÏôÑÎ£å!</h2>
                    <p class="complete-message">Ïù¥ Ï£ºÏ†úÏùò Î™®Îì† Î¨∏Ï†úÎ•º ÏôÑÎ£åÌñàÏäµÎãàÎã§.<br>Îã§Î•∏ Ï£ºÏ†úÎ•º ÏÑ†ÌÉùÌï¥Î≥¥ÏÑ∏Ïöî.</p>
                    <button class="btn btn-primary" onclick="returnToWelcome()">Îã§Î•∏ Ï£ºÏ†ú ÏÑ†ÌÉùÌïòÍ∏∞</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentTopic = '';
        let currentProblemIndex = 0;
        let selectedAnswer = null;
        let stats = {
            totalSolved: 0,
            correctAnswers: 0,
            currentStreak: 0
        };
        let topicStats = {};

        // ÏÇºÍ∞ÅÌòï Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ìï®Ïàò
        function createTriangleImage(hypotenuse, opposite, adjacent, angle) {
            return `
                <svg width="250" height="180" viewBox="0 0 250 180">
                    <polygon points="30,140 170,140 170,50" fill="rgba(79, 172, 254, 0.1)" stroke="#4facfe" stroke-width="3"/>
                    <rect x="162" y="132" width="8" height="8" fill="none" stroke="#666" stroke-width="1"/>
                    <path d="M 40,140 A 10,10 0 0,0 47,133" fill="none" stroke="#e74c3c" stroke-width="2"/>
                    <text x="50" y="132" font-size="16" fill="#e74c3c" font-weight="bold">${angle}</text>
                    <text x="100" y="155" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">Ïù∏Î≥Ä = ${adjacent}</text>
                    <text x="185" y="95" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">ÎåÄÎ≥Ä = ${opposite}</text>
                    <text x="95" y="90" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">ÎπóÎ≥Ä = ${hypotenuse}</text>
                    <circle cx="30" cy="140" r="3" fill="#e74c3c"/>
                    <circle cx="170" cy="140" r="3" fill="#2c3e50"/>
                    <circle cx="170" cy="50" r="3" fill="#2c3e50"/>
                    <text x="25" y="155" font-size="16" fill="#e74c3c" font-weight="bold">A</text>
                    <text x="175" y="155" font-size="16" fill="#2c3e50" font-weight="bold">B</text>
                    <text x="175" y="45" font-size="16" fill="#2c3e50" font-weight="bold">C</text>
                    <text x="150" y="155" font-size="12" fill="#666">90¬∞</text>
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
                        </marker>
                    </defs>
                    <path d="M 45,125 Q 55,120 45,115" fill="none" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
                </svg>
            `;
        }

        // Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞
        const problemSets = {
            basic: [
                {
                    title: "Í∏∞Î≥∏ Í∞úÎÖê 1",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòï ABCÏóêÏÑú ‚à†A = Œ∏Ïùº Îïå, sin Œ∏Ïùò Í∞íÏùÄ?",
                    image: createTriangleImage("10", "6", "8", "Œ∏"),
                    options: ["0.6", "0.8", "0.75", "1.2"],
                    correct: 0,
                    explanation: "Í∞Å AÏóêÏÑú Î≥¥Î©¥ ÎåÄÎ≥ÄÏùÄ BC = 6, ÎπóÎ≥ÄÏùÄ AC = 10Ïù¥ÎØÄÎ°ú\nsin Œ∏ = sin A = ÎåÄÎ≥Ä/ÎπóÎ≥Ä = 6/10 = 0.6ÏûÖÎãàÎã§.",
                    hint: "Í∞Å A(Œ∏)ÏóêÏÑú ÎåÄÎ≥ÄÏùÄ ÎßûÏùÄÌé∏ Î≥Ä BCÏù¥Í≥†, ÎπóÎ≥ÄÏùÄ ACÏûÖÎãàÎã§. sin Œ∏ = ÎåÄÎ≥Ä/ÎπóÎ≥ÄÏù¥ÏóêÏöî."
                },
                {
                    title: "Í∏∞Î≥∏ Í∞úÎÖê 2",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòï ABCÏóêÏÑú ‚à†A = Œ∏Ïùº Îïå, cos Œ∏Ïùò Í∞íÏùÄ?",
                    image: createTriangleImage("10", "6", "8", "Œ∏"),
                    options: ["0.6", "0.8", "1.25", "0.75"],
                    correct: 1,
                    explanation: "Í∞Å AÏóêÏÑú Î≥¥Î©¥ Ïù∏Î≥ÄÏùÄ AB = 8, ÎπóÎ≥ÄÏùÄ AC = 10Ïù¥ÎØÄÎ°ú\ncos Œ∏ = cos A = Ïù∏Î≥Ä/ÎπóÎ≥Ä = 8/10 = 0.8ÏûÖÎãàÎã§.",
                    hint: "Í∞Å A(Œ∏)ÏóêÏÑú Ïù∏Î≥ÄÏùÄ Ïù∏Ï†ëÌïú Î≥Ä ABÏù¥Í≥†, ÎπóÎ≥ÄÏùÄ ACÏûÖÎãàÎã§. cos Œ∏ = Ïù∏Î≥Ä/ÎπóÎ≥ÄÏù¥ÏóêÏöî."
                },
                {
                    title: "Í∏∞Î≥∏ Í∞úÎÖê 3",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòï ABCÏóêÏÑú ‚à†A = Œ∏Ïùº Îïå, tan Œ∏Ïùò Í∞íÏùÄ?",
                    image: createTriangleImage("10", "6", "8", "Œ∏"),
                    options: ["0.75", "1.33", "0.6", "0.8"],
                    correct: 0,
                    explanation: "Í∞Å AÏóêÏÑú Î≥¥Î©¥ ÎåÄÎ≥ÄÏùÄ BC = 6, Ïù∏Î≥ÄÏùÄ AB = 8Ïù¥ÎØÄÎ°ú\ntan Œ∏ = tan A = ÎåÄÎ≥Ä/Ïù∏Î≥Ä = 6/8 = 0.75ÏûÖÎãàÎã§.",
                    hint: "Í∞Å A(Œ∏)ÏóêÏÑú ÎåÄÎ≥ÄÏùÄ BC, Ïù∏Î≥ÄÏùÄ ABÏûÖÎãàÎã§. tan Œ∏ = ÎåÄÎ≥Ä/Ïù∏Î≥ÄÏù¥ÏóêÏöî."
                }
            ],
            calculation: [
                {
                    title: "Í≥ÑÏÇ∞ Î¨∏Ï†ú 1",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòïÏóêÏÑú ‚à†A = Œ∏Ïù¥Í≥†, sin Œ∏ = 3/5Ïùº Îïå, cos Œ∏Ïùò Í∞íÏùÄ?",
                    image: createTriangleImage("5", "3", "4", "Œ∏"),
                    options: ["4/5", "3/4", "5/4", "5/3"],
                    correct: 0,
                    explanation: "sin Œ∏ = 3/5Ïù¥ÎØÄÎ°ú ÎåÄÎ≥Ä:ÎπóÎ≥Ä = 3:5ÏûÖÎãàÎã§.\nÌîºÌÉÄÍ≥†ÎùºÏä§ Ï†ïÎ¶¨Î°ú Ïù∏Î≥ÄÏùÑ Íµ¨ÌïòÎ©¥: Ïù∏Î≥Ä = ‚àö(5¬≤ - 3¬≤) = 4\nÎî∞ÎùºÏÑú cos Œ∏ = Ïù∏Î≥Ä/ÎπóÎ≥Ä = 4/5ÏûÖÎãàÎã§.",
                    hint: "sin¬≤Œ∏ + cos¬≤Œ∏ = 1 ÎòêÎäî ÌîºÌÉÄÍ≥†ÎùºÏä§ Ï†ïÎ¶¨Î•º Ïù¥Ïö©Ìï¥Î≥¥ÏÑ∏Ïöî."
                },
                {
                    title: "Í≥ÑÏÇ∞ Î¨∏Ï†ú 2",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòïÏóêÏÑú cos A = 12/13Ïùº Îïå, tan AÏùò Í∞íÏùÄ?",
                    image: createTriangleImage("13", "5", "12", "A"),
                    options: ["5/12", "12/5", "5/13", "13/5"],
                    correct: 0,
                    explanation: "cos A = 12/13Ïù¥ÎØÄÎ°ú Ïù∏Î≥Ä:ÎπóÎ≥Ä = 12:13ÏûÖÎãàÎã§.\nÌîºÌÉÄÍ≥†ÎùºÏä§ Ï†ïÎ¶¨Î°ú ÎåÄÎ≥ÄÏùÑ Íµ¨ÌïòÎ©¥: ÎåÄÎ≥Ä = ‚àö(13¬≤ - 12¬≤) = 5\nÎî∞ÎùºÏÑú tan A = ÎåÄÎ≥Ä/Ïù∏Î≥Ä = 5/12ÏûÖÎãàÎã§.",
                    hint: "ÌîºÌÉÄÍ≥†ÎùºÏä§ Ï†ïÎ¶¨Î•º ÏÇ¨Ïö©Ìï¥ÏÑú ÎåÄÎ≥ÄÏùÑ Íµ¨Ìï¥Î≥¥ÏÑ∏Ïöî."
                }
            ],
            special: [
                {
                    title: "ÌäπÏàòÍ∞Å 1",
                    text: "sin 30¬∞Ïùò Í∞íÏùÄ?",
                    image: '<div style="text-align: center;"><svg width="200" height="120" viewBox="0 0 200 120"><polygon points="20,100 180,100 100,20" fill="rgba(79, 172, 254, 0.1)" stroke="#4facfe" stroke-width="2"/><text x="100" y="115" text-anchor="middle" font-size="12" fill="#333">2</text><text x="190" y="65" text-anchor="middle" font-size="12" fill="#333">1</text><text x="55" y="55" text-anchor="middle" font-size="12" fill="#333">‚àö3</text><text x="30" y="90" font-size="14" fill="#e74c3c" font-weight="bold">30¬∞</text></svg></div>',
                    options: ["1/2", "‚àö2/2", "‚àö3/2", "1"],
                    correct: 0,
                    explanation: "30-60-90 ÏÇºÍ∞ÅÌòïÏóêÏÑú Î≥ÄÏùò ÎπÑÎäî 1:‚àö3:2ÏûÖÎãàÎã§.\n30¬∞ Í∞ÅÏóêÏÑú ÎåÄÎ≥Ä:ÎπóÎ≥Ä = 1:2Ïù¥ÎØÄÎ°ú sin 30¬∞ = 1/2ÏûÖÎãàÎã§.",
                    hint: "30-60-90 ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòïÏùÑ Í∑∏Î†§Î≥¥ÏÑ∏Ïöî. Î≥ÄÏùò ÎπÑÎäî 1:‚àö3:2ÏûÖÎãàÎã§."
                },
                {
                    title: "ÌäπÏàòÍ∞Å 2",
                    text: "cos 60¬∞Ïùò Í∞íÏùÄ?",
                    image: '<div style="text-align: center;"><svg width="200" height="120" viewBox="0 0 200 120"><polygon points="20,100 180,100 100,20" fill="rgba(79, 172, 254, 0.1)" stroke="#4facfe" stroke-width="2"/><text x="100" y="115" text-anchor="middle" font-size="12" fill="#333">2</text><text x="190" y="65" text-anchor="middle" font-size="12" fill="#333">‚àö3</text><text x="55" y="55" text-anchor="middle" font-size="12" fill="#333">1</text><text x="165" y="90" font-size="14" fill="#e74c3c" font-weight="bold">60¬∞</text></svg></div>',
                    options: ["1/2", "‚àö3/2", "‚àö2/2", "1"],
                    correct: 0,
                    explanation: "30-60-90 ÏÇºÍ∞ÅÌòïÏóêÏÑú Î≥ÄÏùò ÎπÑÎäî 1:‚àö3:2ÏûÖÎãàÎã§.\n60¬∞ Í∞ÅÏóêÏÑú Ïù∏Î≥Ä:ÎπóÎ≥Ä = 1:2Ïù¥ÎØÄÎ°ú cos 60¬∞ = 1/2ÏûÖÎãàÎã§.",
                    hint: "60¬∞ Í∞ÅÏóêÏÑú Ïù∏Î≥ÄÍ≥º ÎπóÎ≥ÄÏùò ÎπÑÏú®ÏùÑ ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî."
                }
            ],
            application: [
                {
                    title: "ÌôúÏö© Î¨∏Ï†ú 1",
                    text: "ÎÜíÏù¥ 20mÏù∏ Í±¥Î¨ºÏùÑ 50m Í±∞Î¶¨ÏóêÏÑú Ïò¨Î†§Îã§Î≥∏ Í∞ÅÏùÑ Œ∏Îùº Ìï† Îïå, tan Œ∏Îäî?",
                    image: '<div style="text-align: center;"><svg width="250" height="140" viewBox="0 0 250 140"><rect x="180" y="40" width="15" height="80" fill="#4facfe"/><line x1="20" y1="120" x2="220" y2="120" stroke="#333" stroke-width="2"/><line x1="50" y1="120" x2="185" y2="40" stroke="#e74c3c" stroke-width="2" stroke-dasharray="3,3"/><text x="115" y="135" text-anchor="middle" font-size="12" fill="#333">50m</text><text x="205" y="85" font-size="12" fill="#333">20m</text><text x="60" y="110" font-size="12" fill="#e74c3c" font-weight="bold">Œ∏</text></svg></div>',
                    options: ["2/5", "5/2", "3/4", "4/3"],
                    correct: 0,
                    explanation: "tan Œ∏ = ÎåÄÎ≥Ä/Ïù∏Î≥Ä = Í±¥Î¨ºÎÜíÏù¥/Í±∞Î¶¨ = 20/50 = 2/5ÏûÖÎãàÎã§.",
                    hint: "Í±¥Î¨ºÏùò ÎÜíÏù¥Í∞Ä ÎåÄÎ≥Ä, Í±¥Î¨ºÎ°úÎ∂ÄÌÑ∞Ïùò Í±∞Î¶¨Í∞Ä Ïù∏Î≥ÄÏù¥ÏóêÏöî."
                },
                {
                    title: "ÌôúÏö© Î¨∏Ï†ú 2",
                    text: "ÏÇ¨Îã§Î¶¨Í∞Ä Î≤ΩÏóê Í∏∞ÎåÄÏñ¥Ï†∏ ÏûàÍ≥†, Î∞îÎã•Í≥º 30¬∞ Í∞ÅÏùÑ Ïù¥Î£πÎãàÎã§. ÏÇ¨Îã§Î¶¨Ïùò Í∏∏Ïù¥Í∞Ä 4mÏùº Îïå, ÏÇ¨Îã§Î¶¨Ïùò ÏúóÎÅùÏù¥ Î≤ΩÏóê ÎãøÎäî ÎÜíÏù¥Îäî?",
                    image: '<div style="text-align: center;"><svg width="200" height="150" viewBox="0 0 200 150"><line x1="20" y1="120" x2="160" y2="120" stroke="#333" stroke-width="2"/><line x1="160" y1="120" x2="160" y2="20" stroke="#666" stroke-width="5"/><line x1="20" y1="120" x2="160" y2="20" stroke="#e74c3c" stroke-width="4"/><text x="90" y="75" font-size="12" fill="#e74c3c" font-weight="bold">4m</text><text x="30" y="110" font-size="12" fill="#e74c3c" font-weight="bold">30¬∞</text><text x="170" y="70" font-size="12" fill="#333">ÎÜíÏù¥ = ?</text></svg></div>',
                    options: ["2m", "2‚àö3m", "4m", "4‚àö3m"],
                    correct: 0,
                    explanation: "ÏÇ¨Îã§Î¶¨ÏôÄ Î∞îÎã•Ïù¥ 30¬∞ Í∞ÅÏùÑ Ïù¥Î£®ÎØÄÎ°ú, ÎÜíÏù¥Îäî ÎπóÎ≥ÄÏóê sin 30¬∞Î•º Í≥±ÌïòÎ©¥ Îê©ÎãàÎã§.\nÎÜíÏù¥ = 4 √ó sin 30¬∞ = 4 √ó (1/2) = 2mÏûÖÎãàÎã§.",
                    hint: "ÏÇ¨Îã§Î¶¨Í∞Ä ÎπóÎ≥ÄÏù¥Í≥†, ÎÜíÏù¥Í∞Ä ÎåÄÎ≥ÄÏûÖÎãàÎã§. sin 30¬∞ = 1/2Î•º Ïù¥Ïö©Ìï¥Î≥¥ÏÑ∏Ïöî."
                }
            ],
            mixed: [
                {
                    title: "Ï¢ÖÌï© Î¨∏Ï†ú 1",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòïÏóêÏÑú ÎπóÎ≥ÄÏù¥ 13, Ìïú Î≥ÄÏù¥ 5Ïùº Îïå, ÏòàÍ∞ÅÏùò ÏÇ¨Ïù∏Í∞íÏùÄ?",
                    image: createTriangleImage("13", "12", "5", "A"),
                    options: ["5/13", "12/13", "5/12", "12/5"],
                    correct: 1,
                    explanation: "ÌîºÌÉÄÍ≥†ÎùºÏä§ Ï†ïÎ¶¨Î°ú Îã§Î•∏ Î≥Ä: ‚àö(13¬≤ - 5¬≤) = 12\nsin A = ÎåÄÎ≥Ä/ÎπóÎ≥Ä = 12/13ÏûÖÎãàÎã§.",
                    hint: "ÌîºÌÉÄÍ≥†ÎùºÏä§ Ï†ïÎ¶¨Î°ú ÎÇòÎ®∏ÏßÄ Ìïú Î≥ÄÏùÑ Íµ¨Ìï¥Î≥¥ÏÑ∏Ïöî."
                },
                {
                    title: "Ï¢ÖÌï© Î¨∏Ï†ú 2",
                    text: "ÏßÅÍ∞ÅÏÇºÍ∞ÅÌòïÏóêÏÑú Ìïú ÏòàÍ∞ÅÏù¥ Œ∏Ïù¥Í≥†, sin Œ∏ + cos Œ∏ = 7/5Ïùº Îïå, sin Œ∏ √ó cos Œ∏Ïùò Í∞íÏùÄ?",
                    image: '<div style="text-align: center; padding: 20px;"><div style="background: #f8f9ff; padding: 20px; border-radius: 10px; border: 2px solid #4facfe;"><p style="font-size: 16px; color: #333; margin: 0;"><strong>Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥:</strong><br>sin Œ∏ + cos Œ∏ = 7/5</p></div></div>',
                    options: ["12/25", "24/25", "7/25", "49/25"],
                    correct: 0,
                    explanation: "(sin Œ∏ + cos Œ∏)¬≤ = sin¬≤Œ∏ + 2sin Œ∏ cos Œ∏ + cos¬≤Œ∏ = 1 + 2sin Œ∏ cos Œ∏\n(7/5)¬≤ = 1 + 2sin Œ∏ cos Œ∏\n49/25 = 1 + 2sin Œ∏ cos Œ∏\n2sin Œ∏ cos Œ∏ = 49/25 - 1 = 24/25\nÎî∞ÎùºÏÑú sin Œ∏ cos Œ∏ = 12/25",
                    hint: "(sin Œ∏ + cos Œ∏)¬≤Î•º Ï†ÑÍ∞úÌï¥Î≥¥ÏÑ∏Ïöî. sin¬≤Œ∏ + cos¬≤Œ∏ = 1ÏûÑÏùÑ Ïù¥Ïö©ÌïòÏÑ∏Ïöî."
                },
                {
                    title: "Ï¢ÖÌï© Î¨∏Ï†ú 3",
                    text: "ÏÇºÍ∞ÅÌòï ABCÏóêÏÑú ‚à†C = 90¬∞, ‚à†A = 30¬∞, BC = 6Ïùº Îïå, ABÏùò Í∏∏Ïù¥Îäî?",
                    image: createTriangleImage("AB", "6", "6‚àö3", "30¬∞"),
                    options: ["12", "6‚àö3", "4‚àö3", "3‚àö3"],
                    correct: 0,
                    explanation: "‚à†A = 30¬∞Ïù¥Í≥† BCÍ∞Ä ÎåÄÎ≥ÄÏù¥ÎØÄÎ°ú,\nsin 30¬∞ = BC/AB = 6/AB\n1/2 = 6/AB\nAB = 12ÏûÖÎãàÎã§.",
                    hint: "30¬∞ Í∞ÅÏóêÏÑú ÎåÄÎ≥ÄÍ≥º ÎπóÎ≥ÄÏùò Í¥ÄÍ≥ÑÎ•º ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî."
                }
            ]
        };

        // Ï£ºÏ†ú ÏÑ†ÌÉù Ìï®Ïàò
        function selectTopic(topic) {
            document.querySelectorAll('.topic-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeItem = document.querySelector(`[data-topic="${topic}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }

            currentTopic = topic;
            currentProblemIndex = 0;
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('problemCard').style.display = 'block';
            document.getElementById('topicComplete').style.display = 'none';
            document.getElementById('problemCard').classList.add('active');
            
            showProblem();
        }

        // Î¨∏Ï†ú ÌëúÏãú Ìï®Ïàò
        function showProblem() {
            const problems = problemSets[currentTopic];
            if (!problems || currentProblemIndex >= problems.length) {
                showTopicComplete();
                return;
            }

            const problem = problems[currentProblemIndex];
            
            document.getElementById('problemTitle').textContent = problem.title;
            document.getElementById('problemText').textContent = problem.text;
            document.getElementById('problemImage').innerHTML = problem.image || '';
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            problem.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            resetButtons();
            selectedAnswer = null;
            document.getElementById('feedback').style.display = 'none';
            
            // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
            updateProgress();
        }

        // ÏÑ†ÌÉùÏßÄ ÏÑ†ÌÉù
        function selectOption(index) {
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            document.querySelectorAll('.option')[index].classList.add('selected');
            selectedAnswer = index;
            document.getElementById('checkBtn').disabled = false;
        }

        // ÌûåÌä∏ ÌëúÏãú
        function showHint() {
            const problem = problemSets[currentTopic][currentProblemIndex];
            alert('üí° ÌûåÌä∏: ' + problem.hint);
        }

        // Ï†ïÎãµ ÌôïÏù∏
        function checkAnswer() {
            if (selectedAnswer === null) return;
            
            const problem = problemSets[currentTopic][currentProblemIndex];
            const isCorrect = selectedAnswer === problem.correct;
            
            stats.totalSolved++;
            if (isCorrect) {
                stats.correctAnswers++;
                stats.currentStreak++;
            } else {
                stats.currentStreak = 0;
            }
            
            // Ï£ºÏ†úÎ≥Ñ ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
            if (!topicStats[currentTopic]) {
                topicStats[currentTopic] = { solved: 0, correct: 0 };
            }
            topicStats[currentTopic].solved++;
            if (isCorrect) {
                topicStats[currentTopic].correct++;
            }
            
            document.querySelectorAll('.option').forEach((opt, index) => {
                opt.onclick = null; // ÌÅ¥Î¶≠ ÎπÑÌôúÏÑ±Ìôî
                if (index === problem.correct) {
                    opt.classList.add('correct');
                } else if (index === selectedAnswer && !isCorrect) {
                    opt.classList.add('wrong');
                }
            });
            
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            const explanation = document.getElementById('explanation');
            
            feedback.className = `feedback ${isCorrect ? 'correct' : 'wrong'}`;
            feedbackText.textContent = isCorrect ? 'üéâ Ï†ïÎãµÏûÖÎãàÎã§!' : '‚ùå ÌãÄÎ†∏ÏäµÎãàÎã§.';
            explanation.textContent = problem.explanation;
            feedback.style.display = 'block';
            
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            document.getElementById('hintBtn').style.display = 'none';
            
            updateStats();
        }

        // Îã§Ïùå Î¨∏Ï†ú
        function nextProblem() {
            currentProblemIndex++;
            showProblem();
        }

        // Î≤ÑÌäº ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
        function resetButtons() {
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'inline-block';
        }

        // Ï£ºÏ†ú ÏôÑÎ£å ÌôîÎ©¥
        function showTopicComplete() {
            document.getElementById('problemCard').style.display = 'none';
            document.getElementById('topicComplete').style.display = 'block';
            
            // ÏôÑÎ£åÎêú Ï£ºÏ†ú ÌëúÏãú
            const topicItem = document.querySelector(`[data-topic="${currentTopic}"]`);
            if (topicItem) {
                topicItem.classList.add('completed');
            }
        }

        // Ïõ∞Ïª¥ ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function returnToWelcome() {
            document.getElementById('topicComplete').style.display = 'none';
            document.getElementById('problemCard').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            
            // Î™®Îì† Ï£ºÏ†ú ÏÑ†ÌÉù Ìï¥Ï†ú
            document.querySelectorAll('.topic-item').forEach(item => {
                item.classList.remove('active');
            });
        }

        // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateStats() {
            document.getElementById('totalSolved').textContent = stats.totalSolved;
            document.getElementById('correctRate').textContent = 
                stats.totalSolved > 0 ? Math.round((stats.correctAnswers / stats.totalSolved) * 100) + '%' : '0%';
            document.getElementById('currentStreak').textContent = stats.currentStreak;
        }

        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const totalProblems = Object.values(problemSets).reduce((sum, problems) => sum + problems.length, 0);
            const progress = stats.totalSolved / totalProblems * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            updateProgress();
        });
    </script>
</body>
</html>
