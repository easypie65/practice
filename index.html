<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤‘3 ì‚¼ê°ë¹„ ì´ë³µìŠµ - ë§ì¶¤í˜• ë¬¸ì œì€í–‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .progress-section {
            padding: 20px 30px;
            background: #f8f9ff;
            border-bottom: 1px solid #e0e6ff;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e6ff;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .stat {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-width: 120px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 300px;
            background: #f8f9ff;
            padding: 30px;
            border-right: 1px solid #e0e6ff;
        }

        .topic-list {
            list-style: none;
        }

        .topic-item {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .topic-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .topic-item.active {
            border-color: #4facfe;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .topic-item.completed::after {
            content: 'âœ“';
            position: absolute;
            right: 15px;
            top: 15px;
            color: #4caf50;
            font-weight: bold;
            font-size: 1.2em;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .problem-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            margin-bottom: 30px;
            display: none;
        }

        .problem-card.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .problem-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .problem-image {
            text-align: center;
            margin: 20px 0;
        }

        .problem-text {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #555;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e6ff;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1.1em;
        }

        .option:hover {
            border-color: #4facfe;
            background: #f8f9ff;
        }

        .option.selected {
            border-color: #4facfe;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .option.correct {
            border-color: #4caf50;
            background: #e8f5e8;
            color: #2e7d32;
        }

        .option.wrong {
            border-color: #f44336;
            background: #ffebee;
            color: #c62828;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-secondary {
            background: #f0f2f5;
            color: #666;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
        }

        .feedback.correct {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            color: #2e7d32;
        }

        .feedback.wrong {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
        }

        .explanation {
            margin-top: 15px;
            font-size: 1em;
            line-height: 1.5;
            white-space: pre-line;
        }

        .reference-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .reference-title {
            font-size: 1.3em;
            margin-bottom: 15px;
            text-align: center;
        }

        .formulas {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }

        .formula {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .welcome-screen {
            text-align: center;
        }

        .welcome-title {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 20px;
        }

        .welcome-text {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .start-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(79, 172, 254, 0.4);
        }

        .topic-complete {
            text-align: center;
            padding: 40px;
        }

        .complete-title {
            font-size: 2.2em;
            color: #4caf50;
            margin-bottom: 20px;
        }

        .complete-message {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”º ì‚¼ê°ë¹„ ë§ˆìŠ¤í„°</h1>
            <p>ì¤‘í•™êµ 3í•™ë…„ ì‚¼ê°ë¹„ ì´ ë³µìŠµ - ë§ì¶¤í˜• ë¬¸ì œì€í–‰</p>
        </div>

        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="totalSolved">0</div>
                    <div>í•´ê²°í•œ ë¬¸ì œ</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="correctRate">0%</div>
                    <div>ì •ë‹µë¥ </div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="currentStreak">0</div>
                    <div>ì—°ì† ì •ë‹µ</div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="reference-card">
                    <div class="reference-title">ğŸ“ ì‚¼ê°ë¹„ ê³µì‹</div>
                    <div class="formulas">
                        <div class="formula">sin Î¸ = ëŒ€ë³€/ë¹—ë³€</div>
                        <div class="formula">cos Î¸ = ì¸ë³€/ë¹—ë³€</div>
                        <div class="formula">tan Î¸ = ëŒ€ë³€/ì¸ë³€</div>
                    </div>
                </div>
                
                <ul class="topic-list">
                    <li class="topic-item" data-topic="basic" onclick="selectTopic('basic')">
                        <strong>ê¸°ë³¸ ê°œë…</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">ì‚¼ê°ë¹„ì˜ ì •ì˜ì™€ ê¸°ë³¸ ê°œë…</div>
                    </li>
                    <li class="topic-item" data-topic="calculation" onclick="selectTopic('calculation')">
                        <strong>ì‚¼ê°ë¹„ ê³„ì‚°</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">ì£¼ì–´ì§„ ì¡°ê±´ìœ¼ë¡œ ì‚¼ê°ë¹„ êµ¬í•˜ê¸°</div>
                    </li>
                    <li class="topic-item" data-topic="special" onclick="selectTopic('special')">
                        <strong>íŠ¹ìˆ˜ê°</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">30Â°, 45Â°, 60Â° ì‚¼ê°ë¹„</div>
                    </li>
                    <li class="topic-item" data-topic="application" onclick="selectTopic('application')">
                        <strong>í™œìš© ë¬¸ì œ</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">ì‹¤ìƒí™œ ë¬¸ì œ í•´ê²°í•˜ê¸°</div>
                    </li>
                    <li class="topic-item" data-topic="mixed" onclick="selectTopic('mixed')">
                        <strong>ì¢…í•© ë¬¸ì œ</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">ëª¨ë“  ë‚´ìš©ì„ ì¢…í•©í•œ ë¬¸ì œ</div>
                    </li>
                </ul>
            </div>

            <div class="content-area">
                <div id="welcomeScreen" class="welcome-screen">
                    <h2 class="welcome-title">ì‚¼ê°ë¹„ ì´ë³µìŠµì„ ì‹œì‘í•´ë³´ì„¸ìš”! ğŸš€</h2>
                    <p class="welcome-text">
                        ì™¼ìª½ì—ì„œ í•™ìŠµí•˜ê³  ì‹¶ì€ ì£¼ì œë¥¼ ì„ íƒí•˜ë©´<br>
                        ë§ì¶¤í˜• ë¬¸ì œë“¤ì´ ì°¨ë¡€ëŒ€ë¡œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.<br>
                        ê° ë¬¸ì œë§ˆë‹¤ ìì„¸í•œ í•´ì„¤ê³¼ í•¨ê»˜ ì‹¤ë ¥ì„ í‚¤ì›Œë³´ì„¸ìš”!
                    </p>
                    <button class="start-btn" onclick="selectTopic('basic')">ê¸°ë³¸ ê°œë…ë¶€í„° ì‹œì‘í•˜ê¸°</button>
                </div>

                <div id="problemCard" class="problem-card">
                    <h3 class="problem-title" id="problemTitle">ë¬¸ì œ</h3>
                    <div class="problem-image" id="problemImage"></div>
                    <div class="problem-text" id="problemText">ë¬¸ì œ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                    <div class="options" id="optionsContainer"></div>
                    <div class="buttons">
                        <button class="btn btn-secondary" id="hintBtn" onclick="showHint()">ğŸ’¡ íŒíŠ¸</button>
                        <button class="btn btn-primary" id="checkBtn" onclick="checkAnswer()" disabled>ì •ë‹µ í™•ì¸</button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextProblem()" style="display: none;">ë‹¤ìŒ ë¬¸ì œ</button>
                    </div>
                    <div class="feedback" id="feedback">
                        <div id="feedbackText"></div>
                        <div class="explanation" id="explanation"></div>
                    </div>
                </div>

                <div id="topicComplete" class="topic-complete" style="display: none;">
                    <h2 class="complete-title">ğŸ‰ ì£¼ì œ ì™„ë£Œ!</h2>
                    <p class="complete-message">ì´ ì£¼ì œì˜ ëª¨ë“  ë¬¸ì œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.<br>ë‹¤ë¥¸ ì£¼ì œë¥¼ ì„ íƒí•´ë³´ì„¸ìš”.</p>
                    <button class="btn btn-primary" onclick="returnToWelcome()">ë‹¤ë¥¸ ì£¼ì œ ì„ íƒí•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentTopic = '';
        let currentProblemIndex = 0;
        let selectedAnswer = null;
        let stats = {
            totalSolved: 0,
            correctAnswers: 0,
            currentStreak: 0
        };
        let topicStats = {};

        // ì‚¼ê°í˜• ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜
        function createTriangleImage(hypotenuse, opposite, adjacent, angle) {
            return `
                <svg width="250" height="180" viewBox="0 0 250 180">
                    <polygon points="30,140 170,140 170,50" fill="rgba(79, 172, 254, 0.1)" stroke="#4facfe" stroke-width="3"/>
                    <rect x="162" y="132" width="8" height="8" fill="none" stroke="#666" stroke-width="1"/>
                    <path d="M 40,140 A 10,10 0 0,0 47,133" fill="none" stroke="#e74c3c" stroke-width="2"/>
                    <text x="50" y="132" font-size="16" fill="#e74c3c" font-weight="bold">${angle}</text>
                    <text x="100" y="155" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">ì¸ë³€ = ${adjacent}</text>
                    <text x="185" y="95" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">ëŒ€ë³€ = ${opposite}</text>
                    <text x="95" y="90" text-anchor="middle" font-size="14" fill="#2c3e50" font-weight="bold">ë¹—ë³€ = ${hypotenuse}</text>
                    <circle cx="30" cy="140" r="3" fill="#e74c3c"/>
                    <circle cx="170" cy="140" r="3" fill="#2c3e50"/>
                    <circle cx="170" cy="50" r="3" fill="#2c3e50"/>
                    <text x="25" y="155" font-size="16" fill="#e74c3c" font-weight="bold">A</text>
                    <text x="175" y="155" font-size="16" fill="#2c3e50" font-weight="bold">B</text>
                    <text x="175" y="45" font-size="16" fill="#2c3e50" font-weight="bold">C</text>
                    <text x="150" y="155" font-size="12" fill="#666">90Â°</text>
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
                        </marker>
                    </defs>
                    <path d="M 45,125 Q 55,120 45,115" fill="none" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
                </svg>
            `;
        }

        // ë¬¸ì œ ë°ì´í„°
        const problemSets = {
            basic: [
                {
                    title: "ê¸°ë³¸ ê°œë… 1",
                    text: "ì§ê°ì‚¼ê°í˜• ABCì—ì„œ âˆ A = Î¸ì¼ ë•Œ, sin Î¸ì˜ ê°’ì€?",
                    image: createTriangleImage("10", "6", "8", "Î¸"),
                    options: ["0.6", "0.8", "0.75", "1.2"],
                    correct: 0,
                    explanation: "ê° Aì—ì„œ ë³´ë©´ ëŒ€ë³€ì€ BC = 6, ë¹—ë³€ì€ AC = 10ì´ë¯€ë¡œ\nsin Î¸ = sin A = ëŒ€ë³€/ë¹—ë³€ = 6/10 = 0.6ì…ë‹ˆë‹¤.",
                    hint: "ê° A(Î¸)ì—ì„œ ëŒ€ë³€ì€ ë§ì€í¸ ë³€ BCì´ê³ , ë¹—ë³€ì€ ACì…ë‹ˆë‹¤. sin Î¸ = ëŒ€ë³€/ë¹—ë³€ì´ì—ìš”."
                },
                {
                    title: "ê¸°ë³¸ ê°œë… 2",
                    text: "ì§ê°ì‚¼ê°í˜• ABCì—ì„œ âˆ A = Î¸ì¼ ë•Œ, cos Î¸ì˜ ê°’ì€?",
                    image: createTriangleImage("10", "6", "8", "Î¸"),
                    options: ["0.6", "0.8", "1.25", "0.75"],
                    correct: 1,
                    explanation: "ê° Aì—ì„œ ë³´ë©´ ì¸ë³€ì€ AB = 8, ë¹—ë³€ì€ AC = 10ì´ë¯€ë¡œ\ncos Î¸ = cos A = ì¸ë³€/ë¹—ë³€ = 8/10 = 0.8ì…ë‹ˆë‹¤.",
                    hint: "ê° A(Î¸)ì—ì„œ ì¸ë³€ì€ ì¸ì ‘í•œ ë³€ ABì´ê³ , ë¹—ë³€ì€ ACì…ë‹ˆë‹¤. cos Î¸ = ì¸ë³€/ë¹—ë³€ì´ì—ìš”."
                },
                {
                    title: "ê¸°ë³¸ ê°œë… 3",
                    text: "ì§ê°ì‚¼ê°í˜• ABCì—ì„œ âˆ A = Î¸ì¼ ë•Œ, tan Î¸ì˜ ê°’ì€?",
                    image: createTriangleImage("10", "6", "8", "Î¸"),
                    options: ["0.75", "1.33", "0.6", "0.8"],
                    correct: 0,
                    explanation: "ê° Aì—ì„œ ë³´ë©´ ëŒ€ë³€ì€ BC = 6, ì¸ë³€ì€ AB = 8ì´ë¯€ë¡œ\ntan Î¸ = tan A = ëŒ€ë³€/ì¸ë³€ = 6/8 = 0.75ì…ë‹ˆë‹¤.",
                    hint: "ê° A(Î¸)ì—ì„œ ëŒ€ë³€ì€ BC, ì¸ë³€ì€ ABì…ë‹ˆë‹¤. tan Î¸ = ëŒ€ë³€/ì¸ë³€ì´ì—ìš”."
                }
            ],
            calculation: [
                {
                    title: "ê³„ì‚° ë¬¸ì œ 1",
                    text: "ì§ê°ì‚¼ê°í˜•ì—ì„œ âˆ A = Î¸ì´ê³ , sin Î¸ = 3/5ì¼ ë•Œ, cos Î¸ì˜ ê°’ì€?",
                    image: createTriangleImage("5", "3", "4", "Î¸"),
                    options: ["4/5", "3/4", "5/4", "5/3"],
                    correct: 0,
                    explanation: "sin Î¸ = 3/5ì´ë¯€ë¡œ ëŒ€ë³€:ë¹—ë³€ = 3:5ì…ë‹ˆë‹¤.\ní”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ë¡œ ì¸ë³€ì„ êµ¬í•˜ë©´: ì¸ë³€ = âˆš(5Â² - 3Â²) = 4\në”°ë¼ì„œ cos Î¸ = ì¸ë³€/ë¹—ë³€ = 4/5ì…ë‹ˆë‹¤.",
                    hint: "sinÂ²Î¸ + cosÂ²Î¸ = 1 ë˜ëŠ” í”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ë¥¼ ì´ìš©í•´ë³´ì„¸ìš”."
                },
                {
                    title: "ê³„ì‚° ë¬¸ì œ 2",
                    text: "ì§ê°ì‚¼ê°í˜•ì—ì„œ cos A = 12/13ì¼ ë•Œ, tan Aì˜ ê°’ì€?",
                    image: createTriangleImage("13", "5", "12", "A"),
                    options: ["5/12", "12/5", "5/13", "13/5"],
                    correct: 0,
                    explanation: "cos A = 12/13ì´ë¯€ë¡œ ì¸ë³€:ë¹—ë³€ = 12:13ì…ë‹ˆë‹¤.\ní”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ë¡œ ëŒ€ë³€ì„ êµ¬í•˜ë©´: ëŒ€ë³€ = âˆš(13Â² - 12Â²) = 5\në”°ë¼ì„œ tan A = ëŒ€ë³€/ì¸ë³€ = 5/12ì…ë‹ˆë‹¤.",
                    hint: "í”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ëŒ€ë³€ì„ êµ¬í•´ë³´ì„¸ìš”."
                }
            ],
            special: [
                {
                    title: "íŠ¹ìˆ˜ê° 1",
                    text: "sin 30Â°ì˜ ê°’ì€?",
                    image: '<div style="text-align: center;"><svg width="200" height="120" viewBox="0 0 200 120"><polygon points="20,100 180,100 100,20" fill="rgba(79, 172, 254, 0.1)" stroke="#4facfe" stroke-width="2"/><text x="100" y="115" text-anchor="middle" font-size="12" fill="#333">2</text><text x="190" y="65" text-anchor="middle" font-size="12" fill="#333">1</text><text x="55" y="55" text-anchor="middle" font-size="12" fill="#333">âˆš3</text><text x="30" y="90" font-size="14" fill="#e74c3c" font-weight="bold">30Â°</text></svg></div>',
                    options: ["1/2", "âˆš2/2", "âˆš3/2", "1"],
                    correct: 0,
                    explanation: "30-60-90 ì‚¼ê°í˜•ì—ì„œ ë³€ì˜ ë¹„ëŠ” 1:âˆš3:2ì…ë‹ˆë‹¤.\n30Â° ê°ì—ì„œ ëŒ€ë³€:ë¹—ë³€ = 1:2ì´ë¯€ë¡œ sin 30Â° = 1/2ì…ë‹ˆë‹¤.",
                    hint: "30-60-90 ì§ê°ì‚¼ê°í˜•ì„ ê·¸ë ¤ë³´ì„¸ìš”. ë³€ì˜ ë¹„ëŠ” 1:âˆš3:2ì…ë‹ˆë‹¤."
                },
                {
                    title: "íŠ¹ìˆ˜ê° 2",
                    text: "cos 60Â°ì˜ ê°’ì€?",
                    image: '<div style="text-align: center;"><svg width="200" height="120" viewBox="0 0 200 120"><polygon points="20,100 180,100 100,20" fill="rgba(79, 172, 254, 0.1)" stroke="#4facfe" stroke-width="2"/><text x="100" y="115" text-anchor="middle" font-size="12" fill="#333">2</text><text x="190" y="65" text-anchor="middle" font-size="12" fill="#333">âˆš3</text><text x="55" y="55" text-anchor="middle" font-size="12" fill="#333">1</text><text x="165" y="90" font-size="14" fill="#e74c3c" font-weight="bold">60Â°</text></svg></div>',
                    options: ["1/2", "âˆš3/2", "âˆš2/2", "1"],
                    correct: 0,
                    explanation: "30-60-90 ì‚¼ê°í˜•ì—ì„œ ë³€ì˜ ë¹„ëŠ” 1:âˆš3:2ì…ë‹ˆë‹¤.\n60Â° ê°ì—ì„œ ì¸ë³€:ë¹—ë³€ = 1:2ì´ë¯€ë¡œ cos 60Â° = 1/2ì…ë‹ˆë‹¤.",
                    hint: "60Â° ê°ì—ì„œ ì¸ë³€ê³¼ ë¹—ë³€ì˜ ë¹„ìœ¨ì„ ìƒê°í•´ë³´ì„¸ìš”."
                }
            ],
            application: [
                {
                    title: "í™œìš© ë¬¸ì œ 1",
                    text: "ë†’ì´ 20mì¸ ê±´ë¬¼ì„ 50m ê±°ë¦¬ì—ì„œ ì˜¬ë ¤ë‹¤ë³¸ ê°ì„ Î¸ë¼ í•  ë•Œ, tan Î¸ëŠ”?",
                    image: '<div style="text-align: center;"><svg width="250" height="140" viewBox="0 0 250 140"><rect x="180" y="40" width="15" height="80" fill="#4facfe"/><line x1="20" y1="120" x2="220" y2="120" stroke="#333" stroke-width="2"/><line x1="50" y1="120" x2="185" y2="40" stroke="#e74c3c" stroke-width="2" stroke-dasharray="3,3"/><text x="115" y="135" text-anchor="middle" font-size="12" fill="#333">50m</text><text x="205" y="85" font-size="12" fill="#333">20m</text><text x="60" y="110" font-size="12" fill="#e74c3c" font-weight="bold">Î¸</text></svg></div>',
                    options: ["2/5", "5/2", "3/4", "4/3"],
                    correct: 0,
                    explanation: "tan Î¸ = ëŒ€ë³€/ì¸ë³€ = ê±´ë¬¼ë†’ì´/ê±°ë¦¬ = 20/50 = 2/5ì…ë‹ˆë‹¤.",
                    hint: "ê±´ë¬¼ì˜ ë†’ì´ê°€ ëŒ€ë³€, ê±´ë¬¼ë¡œë¶€í„°ì˜ ê±°ë¦¬ê°€ ì¸ë³€ì´ì—ìš”."
                },
                {
                    title: "í™œìš© ë¬¸ì œ 2",
                    text: "ì‚¬ë‹¤ë¦¬ê°€ ë²½ì— ê¸°ëŒ€ì–´ì ¸ ìˆê³ , ë°”ë‹¥ê³¼ 30Â° ê°ì„ ì´ë£¹ë‹ˆë‹¤. ì‚¬ë‹¤ë¦¬ì˜ ê¸¸ì´ê°€ 4mì¼ ë•Œ, ì‚¬ë‹¤ë¦¬ì˜ ìœ—ëì´ ë²½ì— ë‹¿ëŠ” ë†’ì´ëŠ”?",
                    image: '<div style="text-align: center;"><svg width="200" height="150" viewBox="0 0 200 150"><line x1="20" y1="120" x2="160" y2="120" stroke="#333" stroke-width="2"/><line x1="160" y1="120" x2="160" y2="20" stroke="#666" stroke-width="5"/><line x1="20" y1="120" x2="160" y2="20" stroke="#e74c3c" stroke-width="4"/><text x="90" y="75" font-size="12" fill="#e74c3c" font-weight="bold">4m</text><text x="30" y="110" font-size="12" fill="#e74c3c" font-weight="bold">30Â°</text><text x="170" y="70" font-size="12" fill="#333">ë†’ì´ = ?</text></svg></div>',
                    options: ["2m", "2âˆš3m", "4m", "4âˆš3m"],
                    correct: 0,
                    explanation: "ì‚¬ë‹¤ë¦¬ì™€ ë°”ë‹¥ì´ 30Â° ê°ì„ ì´ë£¨ë¯€ë¡œ, ë†’ì´ëŠ” ë¹—ë³€ì— sin 30Â°ë¥¼ ê³±í•˜ë©´ ë©ë‹ˆë‹¤.\në†’ì´ = 4 Ã— sin 30Â° = 4 Ã— (1/2) = 2mì…ë‹ˆë‹¤.",
                    hint: "ì‚¬ë‹¤ë¦¬ê°€ ë¹—ë³€ì´ê³ , ë†’ì´ê°€ ëŒ€ë³€ì…ë‹ˆë‹¤. sin 30Â° = 1/2ë¥¼ ì´ìš©í•´ë³´ì„¸ìš”."
                }
            ],
            mixed: [
                {
                    title: "ì¢…í•© ë¬¸ì œ 1",
                    text: "ì§ê°ì‚¼ê°í˜•ì—ì„œ ë¹—ë³€ì´ 13, í•œ ë³€ì´ 5ì¼ ë•Œ, ì˜ˆê°ì˜ ì‚¬ì¸ê°’ì€?",
                    image: createTriangleImage("13", "12", "5", "A"),
                    options: ["5/13", "12/13", "5/12", "12/5"],
                    correct: 1,
                    explanation: "í”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ë¡œ ë‹¤ë¥¸ ë³€: âˆš(13Â² - 5Â²) = 12\nsin A = ëŒ€ë³€/ë¹—ë³€ = 12/13ì…ë‹ˆë‹¤.",
                    hint: "í”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ë¡œ ë‚˜ë¨¸ì§€ í•œ ë³€ì„ êµ¬í•´ë³´ì„¸ìš”."
                },
                {
                    title: "ì¢…í•© ë¬¸ì œ 2",
                    text: "ì§ê°ì‚¼ê°í˜•ì—ì„œ í•œ ì˜ˆê°ì´ Î¸ì´ê³ , sin Î¸ + cos Î¸ = 7/5ì¼ ë•Œ, sin Î¸ Ã— cos Î¸ì˜ ê°’ì€?",
                    image: '<div style="text-align: center; padding: 20px;"><div style="background: #f8f9ff; padding: 20px; border-radius: 10px; border: 2px solid #4facfe;"><p style="font-size: 16px; color: #333; margin: 0;"><strong>ì£¼ì–´ì§„ ì¡°ê±´:</strong><br>sin Î¸ + cos Î¸ = 7/5</p></div></div>',
                    options: ["12/25", "24/25", "7/25", "49/25"],
                    correct: 0,
                    explanation: "(sin Î¸ + cos Î¸)Â² = sinÂ²Î¸ + 2sin Î¸ cos Î¸ + cosÂ²Î¸ = 1 + 2sin Î¸ cos Î¸\n(7/5)Â² = 1 + 2sin Î¸ cos Î¸\n49/25 = 1 + 2sin Î¸ cos Î¸\n2sin Î¸ cos Î¸ = 49/25 - 1 = 24/25\në”°ë¼ì„œ sin Î¸ cos Î¸ = 12/25",
                    hint: "(sin Î¸ + cos Î¸)Â²ë¥¼ ì „ê°œí•´ë³´ì„¸ìš”. sinÂ²Î¸ + cosÂ²Î¸ = 1ì„ì„ ì´ìš©í•˜ì„¸ìš”."
                },
                {
                    title: "ì¢…í•© ë¬¸ì œ 3",
                    text: "ì‚¼ê°í˜• ABCì—ì„œ âˆ C = 90Â°, âˆ A = 30Â°, BC = 6ì¼ ë•Œ, ABì˜ ê¸¸ì´ëŠ”?",
                    image: createTriangleImage("AB", "6", "6âˆš3", "30Â°"),
                    options: ["12", "6âˆš3", "4âˆš3", "3âˆš3"],
                    correct: 0,
                    explanation: "âˆ A = 30Â°ì´ê³  BCê°€ ëŒ€ë³€ì´ë¯€ë¡œ,\nsin 30Â° = BC/AB = 6/AB\n1/2 = 6/AB\nAB = 12ì…ë‹ˆë‹¤.",
                    hint: "30Â° ê°ì—ì„œ ëŒ€ë³€ê³¼ ë¹—ë³€ì˜ ê´€ê³„ë¥¼ ìƒê°í•´ë³´ì„¸ìš”."
                }
            ]
        };

        // ì£¼ì œ ì„ íƒ í•¨ìˆ˜
        function selectTopic(topic) {
            document.querySelectorAll('.topic-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeItem = document.querySelector(`[data-topic="${topic}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }

            currentTopic = topic;
            currentProblemIndex = 0;
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('problemCard').style.display = 'block';
            document.getElementById('topicComplete').style.display = 'none';
            document.getElementById('problemCard').classList.add('active');
            
            showProblem();
        }

        // ë¬¸ì œ í‘œì‹œ í•¨ìˆ˜
        function showProblem() {
            const problems = problemSets[currentTopic];
            if (!problems || currentProblemIndex >= problems.length) {
                showTopicComplete();
                return;
            }

            const problem = problems[currentProblemIndex];
            
            document.getElementById('problemTitle').textContent = problem.title;
            document.getElementById('problemText').textContent = problem.text;
            document.getElementById('problemImage').innerHTML = problem.image || '';
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            problem.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            resetButtons();
            selectedAnswer = null;
            document.getElementById('feedback').style.display = 'none';
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();
        }

        // ì„ íƒì§€ ì„ íƒ
        function selectOption(index) {
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            document.querySelectorAll('.option')[index].classList.add('selected');
            selectedAnswer = index;
            document.getElementById('checkBtn').disabled = false;
        }

        // íŒíŠ¸ í‘œì‹œ
        function showHint() {
            const problem = problemSets[currentTopic][currentProblemIndex];
            alert('ğŸ’¡ íŒíŠ¸: ' + problem.hint);
        }

        // ì •ë‹µ í™•ì¸
        function checkAnswer() {
            if (selectedAnswer === null) return;
            
            const problem = problemSets[currentTopic][currentProblemIndex];
            const isCorrect = selectedAnswer === problem.correct;
            
            stats.totalSolved++;
            if (isCorrect) {
                stats.correctAnswers++;
                stats.currentStreak++;
            } else {
                stats.currentStreak = 0;
            }
            
            // ì£¼ì œë³„ í†µê³„ ì—…ë°ì´íŠ¸
            if (!topicStats[currentTopic]) {
                topicStats[currentTopic] = { solved: 0, correct: 0 };
            }
            topicStats[currentTopic].solved++;
            if (isCorrect) {
                topicStats[currentTopic].correct++;
            }
            
            document.querySelectorAll('.option').forEach((opt, index) => {
                opt.onclick = null; // í´ë¦­ ë¹„í™œì„±í™”
                if (index === problem.correct) {
                    opt.classList.add('correct');
                } else if (index === selectedAnswer && !isCorrect) {
                    opt.classList.add('wrong');
                }
            });
            
            const feedback = document.getElementById('feedback');
            const feedbackText = document.getElementById('feedbackText');
            const explanation = document.getElementById('explanation');
            
            feedback.className = `feedback ${isCorrect ? 'correct' : 'wrong'}`;
            feedbackText.textContent = isCorrect ? 'ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!' : 'âŒ í‹€ë ¸ìŠµë‹ˆë‹¤.';
            explanation.textContent = problem.explanation;
            feedback.style.display = 'block';
            
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            document.getElementById('hintBtn').style.display = 'none';
            
            updateStats();
        }

        // ë‹¤ìŒ ë¬¸ì œ
        function nextProblem() {
            currentProblemIndex++;
            showProblem();
        }

        // ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™”
        function resetButtons() {
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'inline-block';
        }

        // ì£¼ì œ ì™„ë£Œ í™”ë©´
        function showTopicComplete() {
            document.getElementById('problemCard').style.display = 'none';
            document.getElementById('topicComplete').style.display = 'block';
            
            // ì™„ë£Œëœ ì£¼ì œ í‘œì‹œ
            const topicItem = document.querySelector(`[data-topic="${currentTopic}"]`);
            if (topicItem) {
                topicItem.classList.add('completed');
            }
        }

        // ì›°ì»´ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function returnToWelcome() {
            document.getElementById('topicComplete').style.display = 'none';
            document.getElementById('problemCard').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            
            // ëª¨ë“  ì£¼ì œ ì„ íƒ í•´ì œ
            document.querySelectorAll('.topic-item').forEach(item => {
                item.classList.remove('active');
            });
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('totalSolved').textContent = stats.totalSolved;
            document.getElementById('correctRate').textContent = 
                stats.totalSolved > 0 ? Math.round((stats.correctAnswers / stats.totalSolved) * 100) + '%' : '0%';
            document.getElementById('currentStreak').textContent = stats.currentStreak;
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            const totalProblems = Object.values(problemSets).reduce((sum, problems) => sum + problems.length, 0);
            const progress = stats.totalSolved / totalProblems * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            updateProgress();
        });
    </script>
</body>
</html>
